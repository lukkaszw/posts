(this["webpackJsonpbulletin-board"]=this["webpackJsonpbulletin-board"]||[]).push([[0],{102:function(e,t,a){},104:function(e,t,a){},107:function(e,t,a){e.exports={paper:"ErrorComponent_paper__18NpU"}},108:function(e,t,a){e.exports={root:"Loader_root__3IG-K"}},110:function(e,t,a){e.exports={root:"PostEdit_root__wLPzF"}},111:function(e,t,a){e.exports={root:"PostAdd_root__2E4fJ"}},112:function(e,t,a){},133:function(e,t,a){e.exports=a(223)},16:function(e,t,a){e.exports={root:"Navigation_root__2I9XJ",navigation:"Navigation_navigation__CCKaq",navigationItem:"Navigation_navigationItem__3sXr_",navigationLink:"Navigation_navigationLink__1dMdf",active:"Navigation_active__d_gyD"}},19:function(e,t,a){e.exports={root:"PostForm_root__1yB7q",inputBig:"PostForm_inputBig__23Xoc",formControl:"PostForm_formControl__Mj902",smallControls:"PostForm_smallControls__3w1EI",status:"PostForm_status__2ebZ4",btnControl:"PostForm_btnControl__1KHbD",price:"PostForm_price__2reZO",content:"PostForm_content__2SO67",error:"PostForm_error__2A_ix"}},223:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(10),i=a.n(c),s=a(17),l=a(37),u=a(115),m=a(272),p=a(269),d=a(270),E=a(260),f=a(255),g=a(259),h=a(3),v=a(20),_=function(e){return e.user.isAuth},b=(n="AUTHENTICATE","app/".concat("user","/").concat(n)),P=a(16),O=a.n(P),j=Object(v.b)((function(e){return{isAuth:_(e)}}))((function(e){var t=e.className,a=e.isAuth,n=o.a.createElement("ul",{className:O.a.navigation},o.a.createElement("li",{className:O.a.navigationItem},o.a.createElement(s.c,{exact:!0,to:"/",className:O.a.navigationLink,activeClassName:O.a.active},"Home")),o.a.createElement("li",{className:O.a.navigationItem},o.a.createElement(s.c,{exact:!0,to:"/post/add",className:O.a.navigationLink,activeClassName:O.a.active},"Add")),o.a.createElement("li",{className:O.a.navigationItem},o.a.createElement(s.c,{exact:!0,to:"/myposts",className:O.a.navigationLink,activeClassName:O.a.active},"My")));return o.a.createElement("nav",{className:Object(h.a)(t,O.a.root)},o.a.createElement("div",null,a?n:o.a.createElement("div",{className:O.a.navigationItem},o.a.createElement(s.c,{exact:!0,to:"/",className:O.a.navigationLink,activeClassName:O.a.active},"Home"))),o.a.createElement("div",null,a?o.a.createElement("a",{href:"http://localhost:8000/user/logout",className:O.a.navigationLink},"Logout"):o.a.createElement("a",{href:"http://localhost:8000/auth/google",className:O.a.navigationLink},"Login")))})),N=a(102),C=a.n(N),y=function(){return o.a.createElement("div",{className:C.a.root},o.a.createElement(f.a,{position:"static"},o.a.createElement(g.a,null,o.a.createElement(E.a,null,o.a.createElement(j,null)))))},k=a(104),L=a.n(k),I=function(e){var t=e.children;return o.a.createElement("div",{className:L.a.root},o.a.createElement(y,null),o.a.createElement(E.a,null,t))},x=a(9),S=a(274),T=a(261),A=a(225),F=a(224),z=a(262),U=a(107),w=a.n(U),H=function(e){var t=e.title,a=e.message,n=e.isOpen,r=e.isLinkToHP;return o.a.createElement("div",null,o.a.createElement(S.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:n,BackdropComponent:T.a,BackdropProps:{timeout:500}},o.a.createElement(A.a,{in:n},o.a.createElement(F.a,{className:w.a.paper},o.a.createElement("h3",{id:"transition-modal-title"},t),o.a.createElement("p",{id:"transition-modal-description"},a),r&&o.a.createElement(z.a,{href:"/"},"Back to home page")))))},M=a(263),B=a(108),W=a.n(B),R=function(){return o.a.createElement("div",{className:W.a.root},o.a.createElement(M.a,null))},q=a(63),D=a.n(q),G=function(e){var t=e.posts;return o.a.createElement("div",null,o.a.createElement("ul",{className:D.a.postList},t.length>0?t.map((function(e){return o.a.createElement("li",{key:e.title,className:D.a.postItem},o.a.createElement(s.b,{to:"/post/".concat(e._id),className:D.a.postTitleLink},e.title))})):o.a.createElement("p",null,"No available posts!")))},J=a(273),V=a(22),X=a(32),K=a.n(X),Z={url:"http://localhost:8000",endPoints:{posts:"posts"}},Y={maxPostsOnPage:12},$=Y.maxPostsOnPage,Q=function(e){return e.posts.data.posts},ee=function(e){return e.posts.loading.active},te=function(e){return e.posts.loading.error},ae=function(e){return e.posts.data.count},ne=function(e){return"app/".concat("posts","/").concat(e)},re=ne("FETCH_START"),oe=ne("FETCH_SUCCESS"),ce=ne("FETCH_ERROR"),ie=function(e){return{payload:e,type:re}},se=function(e){return{payload:e,type:oe}},le=function(e){return{payload:e,type:ce}},ue=function(e){return function(t){t(ie());var a="".concat(Z.url,"/").concat(Z.endPoints.posts,"?limit=").concat($,"&skip=").concat((e-1)*$);K.a.get(a).then((function(e){if(t(se({posts:e.data.posts,count:e.data.count})),e.data.user){var a=e.data.user.email;t({payload:a,type:b})}})).catch((function(e){return t(le())}))}},me=o.a.createContext({isAuth:!1,userEmail:""}),pe=a(48),de=a.n(pe),Ee=Object(v.b)((function(e){return{posts:Q(e),isLoading:ee(e),isError:te(e),count:ae(e)}}),(function(e){return{fetchPosts:function(t){return e(ue(t))}}}))((function(e){var t=e.fetchPosts,a=e.count,n=e.posts,c=e.isLoading,i=e.isError,l=Object(r.useContext)(me).isAuth,u=Math.ceil(a/Y.maxPostsOnPage),m=Object(r.useState)(1),p=Object(x.a)(m,2),d=p[0],E=p[1];return Object(r.useEffect)((function(){t(d)}),[t,d]),o.a.createElement("section",{className:de.a.root},o.a.createElement("header",{className:de.a.header},o.a.createElement("h2",null,"Posts:"),l&&o.a.createElement(s.b,{to:"/post/add",className:de.a.link},"Add new")),o.a.createElement("div",{className:de.a.list},c?o.a.createElement(R,null):o.a.createElement(G,{posts:n})),u>1&&o.a.createElement("div",{className:de.a.paginationWrapper},o.a.createElement(J.a,{count:u,page:d,onChange:function(e,t){return E(t)},color:"primary",siblingCount:0})),o.a.createElement(H,{title:"Error - fetching data",message:"Can not fetching posts list. Try again later!",isOpen:i}))})),fe=a(31),ge=a.n(fe),he=function(e){e._id;var t=e.title,a=e.content,n=e.createdAt,r=e.imageUrl,c=e.author,i=e.status,s=e.price,l=e.phone,u=e.localization,m=new Date(n).toLocaleDateString();return o.a.createElement("article",{className:ge.a.root},o.a.createElement("div",{className:ge.a.header},o.a.createElement("h2",null,t),o.a.createElement("div",null,o.a.createElement("strong",null,u," ",m))),o.a.createElement("div",{className:ge.a.description},o.a.createElement("img",{className:ge.a.image,src:r,alt:t}),o.a.createElement("div",{className:ge.a.textContent},o.a.createElement("div",null,o.a.createElement("div",{className:ge.a.shortData},o.a.createElement("p",null,o.a.createElement("span",null,"autor: ",o.a.createElement("strong",null,c))),o.a.createElement("p",null,o.a.createElement("span",null,"tel.: ",o.a.createElement("strong",null,l))),o.a.createElement("p",null,o.a.createElement("strong",null,"closed"===i?"og\u0142oszenie nieaktualne":"og\u0142oszenie aktualne"))),o.a.createElement("p",{className:ge.a.content},a)),o.a.createElement("div",null,o.a.createElement("h2",{className:ge.a.price},o.a.createElement("span",{className:ge.a.priceItem},s," z\u0142"))))))},ve=function(e){return e.currentPost.data},_e=function(e){return e.currentPost.request.active},be=function(e){return e.currentPost.request.error},Pe=function(e){return"app/".concat("current-post","/").concat(e)},Oe=Pe("FETCH_START"),je=Pe("FETCH_SUCCESS"),Ne=Pe("FETCH_ERROR"),Ce=function(e){return function(t){var a;t({payload:a,type:Oe});var n="".concat(Z.url,"/").concat(Z.endPoints.posts,"/").concat(e);K.a.get(n).then((function(e){return t(function(e){return{payload:e,type:je}}(e.data.post))})).catch((function(e){return t(function(e){return{payload:e,type:Ne}}())}))}},ye=a(64),ke=a.n(ye),Le=Object(v.b)((function(e){return{post:ve(e),isLoading:_e(e),isError:be(e)}}),(function(e){return{fetchOnePost:function(t){return e(Ce(t))}}}))((function(e){var t=e.match,a=e.fetchOnePost,n=e.post,c=e.isLoading,i=e.isError,l=t.params.id;Object(r.useEffect)((function(){a(l)}),[a,l]);var u=Object(r.useContext)(me),m=u.isAuth,p=u.userEmail;return o.a.createElement("div",{className:ke.a.root},c&&o.a.createElement(R,null),!!n&&!c&&!i&&o.a.createElement("section",null,m&&n.author===p&&o.a.createElement("div",{className:ke.a.linkWrapper},o.a.createElement(s.b,{className:ke.a.link,to:"/post/".concat(n._id,"/edit")},"Edit")),o.a.createElement(he,n)),o.a.createElement(H,{isOpen:i,title:"Error - fetching data",message:"Can not fetching post data! Please try again later.",isLinkToHP:!0}))})),Ie=a(275),xe=a(271),Se=a(277),Te=a(267),Ae=a(226),Fe=a(278),ze=a(268),Ue=function(e){var t=Object(r.useState)(e?e.title:""),a=Object(x.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(e?e.content:""),i=Object(x.a)(c,2),s=i[0],l=i[1],u=Object(r.useState)(e?e.price:0),m=Object(x.a)(u,2),p=m[0],d=m[1],E=Object(r.useState)(e?e.imageUrl:""),f=Object(x.a)(E,2),g=f[0],h=f[1],v=Object(r.useState)(e?e.phone:""),_=Object(x.a)(v,2),b=_[0],P=_[1],O=Object(r.useState)(e?e.localization:""),j=Object(x.a)(O,2),N=j[0],C=j[1],y=Object(r.useState)(e?e.status:"published"),k=Object(x.a)(y,2);return{fields:{title:n,content:s,price:p,imageUrl:g,phone:b,localization:N,status:k[0]},methods:{setTitle:o,setContent:l,setPrice:d,setImage:h,setPhone:P,setLocalization:C,setStatus:k[1]}}},we=a(65),He=a.n(we),Me={isTitle:function(e){return e.length>9},isContent:function(e){return e.length>19},isEmail:function(e){return He.a.isEmail(e)},isUrl:function(e){return He.a.isURL(e)},isPhone:function(e){return He.a.isMobilePhone(e,"pl-PL")},isValidPrice:function(e){return e>=0&&100*e%1===0},isLocalization:function(e){return e.length>0}},Be=function(){var e=Object(r.useState)(!1),t=Object(x.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),c=Object(x.a)(o,2),i=c[0],s=c[1],l=Object(r.useState)(!1),u=Object(x.a)(l,2),m=u[0],p=u[1],d=Object(r.useState)(!1),E=Object(x.a)(d,2),f=E[0],g=E[1],h=Object(r.useState)(!1),v=Object(x.a)(h,2),_=v[0],b=v[1],P=Me.isValidPrice;return{fieldsErrors:{titleErr:a,contentErr:i,imageUrlErr:m,phoneErr:f,localizationErr:_},errorsMethods:{checkAllFields:function(e,t,a,r,o){var c=Me.isTitle(e),i=Me.isContent(t),l=Me.isUrl(a),u=Me.isPhone(r),m=Me.isLocalization(o);return n(!c),s(!i),p(!l),g(!u),b(!m),c&&i&&l&&u&&m},setTitleError:n,setContentError:s,setImageError:p,setPhoneError:g,setLocalizationError:b},isValidPrice:P}},We=a(19),Re=a.n(We),qe=function(e){var t=e.post,a=e.submitAction,n=e.userEmail,c=e.submitButton,i=e.redirectUrl,s=e.editingId,u=Ue(t),m=u.fields,p=u.methods,d=Be(),E=d.fieldsErrors,f=d.errorsMethods,g=d.isValidPrice,v=Object(r.useState)(!1),_=Object(x.a)(v,2),b=_[0],P=_[1],O=Object(r.useState)(!1),j=Object(x.a)(O,2),N=j[0],C=j[1],y=Object(r.useState)(!1),k=Object(x.a)(y,2),L=k[0],I=k[1];return o.a.createElement(o.a.Fragment,null,N&&o.a.createElement(R,null),o.a.createElement("form",{className:Re.a.root,onSubmit:function(e){if(e.preventDefault(),f.checkAllFields(m.title,m.content,m.imageUrl,m.phone,m.localization)){var t=s||null;C(!0),a(Object(V.a)({},m),n,t).then((function(e){C(!1),P(!0)})).catch((function(e){C(!1),I(!0)}))}}},o.a.createElement("div",{className:Re.a.formControl},o.a.createElement(Ie.a,{error:E.titleErr,className:Re.a.inputBig,label:"title",value:m.title,onChange:function(e){p.setTitle(e.target.value),E.titleErr&&f.setTitleError(!1)},helperText:"minimum 10 characters"})),o.a.createElement("div",{className:Re.a.formControl},o.a.createElement(Ie.a,{error:E.imageUrlErr,className:Re.a.inputBig,label:"Image url",value:m.imageUrl,onChange:function(e){p.setImage(e.target.value),E.imageUrlErr&&f.setImageError(!1)}})),o.a.createElement("div",{className:Re.a.formControl},o.a.createElement(Ie.a,{error:E.phoneErr,label:"Phone number",value:m.phone,onChange:function(e){p.setPhone(e.target.value),E.phoneErr&&f.setPhoneError(!1)}})),o.a.createElement("div",{className:Re.a.formControl},o.a.createElement(Ie.a,{error:E.localizationErr,label:"Localization",value:m.localization,onChange:function(e){p.setLocalization(e.target.value),E.localizationErr&&f.setLocalizationError(!1)}})),o.a.createElement("div",{className:Object(h.a)(Re.a.formControl,Re.a.smallControls)},o.a.createElement(Se.a,{variant:"outlined",className:Re.a.status},o.a.createElement(Fe.a,{htmlFor:"status-select"},"Age"),o.a.createElement(xe.a,{native:!0,value:m.status,onChange:function(e){return p.setStatus(e.target.value)},labelWidth:60,inputProps:{name:"status",id:"status-select"}},o.a.createElement("option",{value:"published"},"aktualny"),o.a.createElement("option",{value:"draft"},"szkic"),o.a.createElement("option",{value:"closed"},"nieaktualny"))),o.a.createElement(Ie.a,{className:Re.a.price,type:"number",label:"Price",variant:"outlined",value:m.price,InputProps:{endAdornment:o.a.createElement(Te.a,{position:"end"},"z\u0142")},onChange:function(e){g(e.target.value)&&p.setPrice(e.target.value)}})),o.a.createElement("div",{className:Re.a.formControl},o.a.createElement(Ae.a,{value:m.content,className:Object(h.a)(Re.a.content,E.contentErr?Re.a.error:null),placeholder:"Content - minimum 20 characters",onChange:function(e){p.setContent(e.target.value),E.contentErr&&f.setContentError(!1)}})),o.a.createElement("div",{className:Re.a.btnControl},o.a.createElement(ze.a,{variant:"contained",color:"secondary",type:"submit"},c||"Submit")),b&&o.a.createElement(l.a,{to:i})),o.a.createElement(H,{isOpen:L,title:"Error - sending data",message:"Can not add post! Please try again later.",isLinkToHP:!0}))},De=function(e,t,a){var n="".concat(Z.url,"/").concat(Z.endPoints.posts,"/").concat(a);return K.a.put(n,Object(V.a)({},e))},Ge=a(110),Je=a.n(Ge),Ve=Object(v.b)((function(e){return{post:ve(e),isLoading:_e(e),isError:be(e)}}),(function(e){return{fetchOnePost:function(t){return e(Ce(t))}}}))((function(e){var t=e.match,a=e.fetchOnePost,n=e.isLoading,c=e.isError,i=e.post,s=t.params.id;Object(r.useEffect)((function(){a(s)}),[s,a]);var l=Object(r.useContext)(me).userEmail;return o.a.createElement("div",{className:Je.a.root},o.a.createElement("h2",null,"Edit post #",s),n&&o.a.createElement(R,null),!!i&&i._id===s&&o.a.createElement(qe,{post:i,submitButton:"Edit post",userEmail:l,submitAction:De,editingId:s,redirectUrl:"/post/".concat(s)}),o.a.createElement(H,{isOpen:c,title:"Error - fetching data",message:"Can not fetching post data! Please try again later.",isLinkToHP:!0}))})),Xe=function(e,t){var a="".concat(Z.url,"/").concat(Z.endPoints.posts);return K.a.post(a,Object(V.a)({},e,{author:t}))},Ke=a(111),Ze=a.n(Ke),Ye=function(){var e=Object(r.useContext)(me).userEmail;return o.a.createElement("div",{className:Ze.a.root},o.a.createElement("h2",null,"New post:"),o.a.createElement(qe,{submitAction:Xe,userEmail:e,redirectUrl:"/",submitButton:"Add post"}))},$e=a(112),Qe=a.n($e),et=function(){return o.a.createElement("div",{className:Qe.a.root},o.a.createElement("h2",null,"Page not found"))},tt=a(53),at=a.n(tt),nt=Object(v.b)((function(e){return{posts:Q(e),isLoading:ee(e),isError:te(e),count:ae(e)}}),(function(e){return{fetchMyPosts:function(t){return e(function(e){return function(t){t(ie());var a="".concat(Z.url,"/").concat(Z.endPoints.posts,"/my?limit=").concat($,"&skip=").concat((e-1)*$);K.a.get(a).then((function(e){return t(se({posts:e.data.posts,count:e.data.count}))})).catch((function(e){return t(le())}))}}(t))}}}))((function(e){var t=e.posts,a=e.count,n=e.fetchMyPosts,c=e.isLoading,i=e.isError,l=Math.ceil(a/Y.maxPostsOnPage),u=Object(r.useState)(1),m=Object(x.a)(u,2),p=m[0],d=m[1];return Object(r.useEffect)((function(){n(p)}),[n]),o.a.createElement("section",{className:at.a.root},o.a.createElement("header",{className:at.a.header},o.a.createElement("h2",null,"My posts:"),o.a.createElement(s.b,{to:"/post/add",className:at.a.link},"Add new")),o.a.createElement("div",null,c?o.a.createElement(R,null):o.a.createElement(G,{posts:t})),l>1&&o.a.createElement("div",{className:at.a.paginationWrapper},o.a.createElement(J.a,{count:l,page:p,onChange:function(e,t){return d(t)},color:"primary",siblingCount:0})),o.a.createElement(H,{title:"Error - fetching data",message:"Can not fetching posts list. Try again later!",isOpen:i}))})),rt=Object(u.a)({palette:{primary:{main:"#2B4C6F"}}}),ot=Object(v.b)((function(e){return{isAuth:_(e),userEmail:(t=e,t.user.email)};var t}))((function(e){var t=e.isAuth,a=e.userEmail;return o.a.createElement(s.a,null,o.a.createElement(m.b,{injectFirst:!0},o.a.createElement(p.a,{theme:rt},o.a.createElement(d.a,null),o.a.createElement(me.Provider,{value:{isAuth:t,userEmail:a}},o.a.createElement(I,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{exact:!0,path:"/",component:Ee}),o.a.createElement(l.b,{exact:!0,path:"/post/add",component:t?Ye:et}),o.a.createElement(l.b,{exact:!0,path:"/post/:id",component:Le}),o.a.createElement(l.b,{exact:!0,path:"/post/:id/edit",component:t?Ve:et}),o.a.createElement(l.b,{exact:!0,path:"/myposts",component:t?nt:et}),o.a.createElement(l.b,{path:"*",component:et})))))))})),ct=a(42),it=a(113),st=a(114),lt={posts:{data:{posts:[],count:0},loading:{active:!1,error:!1}},currentPost:{data:{},request:{active:!1,error:!1}},user:{isAuth:!1,email:""}},ut={posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case re:return Object(V.a)({},e,{loading:{active:!0,error:!1}});case oe:return Object(V.a)({},e,{loading:{active:!1,error:!1},data:{posts:t.payload.posts,count:t.payload.count}});case ce:return Object(V.a)({},e,{loading:{active:!1,error:t.payload}});default:return e}},currentPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Oe:return Object(V.a)({},e,{request:{active:!0,error:!1}});case je:return Object(V.a)({},e,{request:{active:!1,error:!1},data:t.payload});case Ne:return Object(V.a)({},e,{request:{active:!1,error:!0}});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case b:return{isAuth:!0,email:t.payload};default:return e}}};Object.keys(lt).forEach((function(e){"undefined"==typeof ut[e]&&(ut[e]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e})}));var mt=Object(ct.combineReducers)(ut),pt=Object(ct.createStore)(mt,lt,Object(st.composeWithDevTools)(Object(ct.applyMiddleware)(it.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(v.a,{store:pt},o.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,a){e.exports={root:"PostInfo_root__3EloO",header:"PostInfo_header__lsrGt",shortData:"PostInfo_shortData__2uMcj",content:"PostInfo_content__2Sifj",description:"PostInfo_description__3SOUq",textContent:"PostInfo_textContent__2S3E2",image:"PostInfo_image__1mRIM",price:"PostInfo_price__GXIOP",priceItem:"PostInfo_priceItem__1lxzb"}},48:function(e,t,a){e.exports={header:"Homepage_header__3ogJz",link:"Homepage_link__2i0r5",list:"Homepage_list__1I0FV",paginationWrapper:"Homepage_paginationWrapper__3fan7"}},53:function(e,t,a){e.exports={header:"MyPosts_header__2UniC",link:"MyPosts_link__3G7_d",paginationWrapper:"MyPosts_paginationWrapper__2Xpku"}},63:function(e,t,a){e.exports={postList:"PostsList_postList__8iBse",postItem:"PostsList_postItem__30CsN",postTitleLink:"PostsList_postTitleLink__1IEmY"}},64:function(e,t,a){e.exports={root:"Post_root__2Gjpq",linkWrapper:"Post_linkWrapper__3lDPF",link:"Post_link__vSaik"}}},[[133,1,2]]]);
//# sourceMappingURL=main.3eae1733.chunk.js.map